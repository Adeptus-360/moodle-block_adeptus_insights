{"version":3,"file":"edit_form.min.js","sources":["../src/edit_form.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for the block edit form - report selection UI.\n *\n * @module     block_adeptus_insights/edit_form\n * @copyright  2025 Adeptus Analytics\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/str', 'core/notification'], function($, Str, Notification) {\n    'use strict';\n\n    /**\n     * Report Selector class for managing report selection in the edit form.\n     *\n     * @param {Object} options Configuration options\n     */\n    var ReportSelector = function(options) {\n        this.mode = options.mode || 'kpi'; // 'kpi' or 'tabs'\n        this.apiKey = options.apiKey || '';\n        this.containerId = options.containerId;\n        this.textareaName = options.textareaName;\n        this.container = null;\n        this.textarea = null;\n        this.reports = [];\n        this.selectedReports = [];\n        this.strings = {};\n\n        this.init();\n    };\n\n    ReportSelector.prototype = {\n        /**\n         * Initialize the report selector.\n         */\n        init: function() {\n            var self = this;\n\n            this.container = $('#' + this.containerId);\n            this.textarea = $('[name=\"' + this.textareaName + '\"]');\n\n            if (!this.container.length || !this.textarea.length) {\n                return;\n            }\n\n            // Load existing selection from textarea\n            this.loadExistingSelection();\n\n            // Load language strings\n            this.loadStrings().then(function() {\n                // Render the UI\n                self.render();\n\n                // Fetch reports from API\n                self.fetchReports();\n\n                // Bind events\n                self.bindEvents();\n\n                // Show container\n                self.container.show();\n            });\n        },\n\n        /**\n         * Load language strings.\n         *\n         * @return {Promise}\n         */\n        loadStrings: function() {\n            var self = this;\n            return Str.get_strings([\n                {key: 'addreport', component: 'block_adeptus_insights'},\n                {key: 'removereport', component: 'block_adeptus_insights'},\n                {key: 'noreportsselected', component: 'block_adeptus_insights'},\n                {key: 'selectareport', component: 'block_adeptus_insights'},\n                {key: 'loading', component: 'block_adeptus_insights'}\n            ]).then(function(strings) {\n                self.strings = {\n                    addreport: strings[0],\n                    removereport: strings[1],\n                    noreportsselected: strings[2],\n                    selectareport: strings[3],\n                    loading: strings[4]\n                };\n            });\n        },\n\n        /**\n         * Load existing selection from textarea.\n         */\n        loadExistingSelection: function() {\n            try {\n                var value = this.textarea.val();\n                if (value) {\n                    this.selectedReports = JSON.parse(value);\n                }\n            } catch (e) {\n                this.selectedReports = [];\n            }\n        },\n\n        /**\n         * Render the report selector UI.\n         */\n        render: function() {\n            var html = '<div class=\"report-selector-ui\">' +\n                '<div class=\"report-selector-header d-flex justify-content-between align-items-center mb-2\">' +\n                '<span class=\"font-weight-bold\">' + (this.mode === 'kpi' ? 'KPI Reports' : 'Tab Reports') + '</span>' +\n                '</div>' +\n                '<div class=\"report-selector-add-container mb-3\">' +\n                '<div class=\"input-group\">' +\n                '<select class=\"form-control report-selector-dropdown\">' +\n                '<option value=\"\">' + this.strings.selectareport + '</option>' +\n                '</select>' +\n                '<div class=\"input-group-append\">' +\n                '<button type=\"button\" class=\"btn btn-primary report-selector-add-btn\">' +\n                '<i class=\"fa fa-plus\"></i> ' + this.strings.addreport +\n                '</button>' +\n                '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"report-selector-list-container\">' +\n                '<ul class=\"list-group report-selector-list\"></ul>' +\n                '<div class=\"report-selector-empty text-muted text-center py-3\">' +\n                '<i class=\"fa fa-inbox fa-2x mb-2\"></i><br>' +\n                this.strings.noreportsselected +\n                '</div>' +\n                '</div>' +\n                '</div>';\n\n            this.container.html(html);\n            this.updateListDisplay();\n        },\n\n        /**\n         * Fetch reports from the API.\n         */\n        fetchReports: function() {\n            var self = this;\n\n            if (!this.apiKey) {\n                return;\n            }\n\n            var baseUrl = 'https://a360backend.stagingwithswift.com/api/v1';\n\n            // Fetch both wizard and AI reports\n            $.when(\n                $.ajax({\n                    url: baseUrl + '/wizard-reports',\n                    method: 'GET',\n                    headers: {\n                        'Authorization': 'Bearer ' + this.apiKey,\n                        'Accept': 'application/json'\n                    },\n                    timeout: 15000\n                }),\n                $.ajax({\n                    url: baseUrl + '/ai-reports',\n                    method: 'GET',\n                    headers: {\n                        'Authorization': 'Bearer ' + this.apiKey,\n                        'Accept': 'application/json'\n                    },\n                    timeout: 15000\n                })\n            ).then(function(wizardResult, aiResult) {\n                var allReports = [];\n\n                // Process wizard reports\n                var wizardReports = wizardResult[0].reports || wizardResult[0].data || [];\n                wizardReports.forEach(function(r) {\n                    r.source = 'wizard';\n                    allReports.push(r);\n                });\n\n                // Process AI reports\n                var aiReports = aiResult[0].reports || aiResult[0].data || [];\n                aiReports.forEach(function(r) {\n                    r.source = 'ai';\n                    allReports.push(r);\n                });\n\n                self.reports = allReports;\n                self.populateDropdown();\n                self.renderSelectedList();\n            }).fail(function() {\n                Notification.addNotification({\n                    message: 'Failed to load reports',\n                    type: 'error'\n                });\n            });\n        },\n\n        /**\n         * Populate the report dropdown.\n         */\n        populateDropdown: function() {\n            var self = this;\n            var dropdown = this.container.find('.report-selector-dropdown');\n            dropdown.find('option:not(:first)').remove();\n\n            this.reports.forEach(function(report) {\n                var name = report.name || report.title || report.display_name || report.slug;\n                var categoryName = report.category_info ? report.category_info.name : 'General';\n                var value = report.slug + '::' + report.source;\n\n                // Check if already selected\n                var isSelected = self.selectedReports.some(function(s) {\n                    return s.slug === report.slug && s.source === report.source;\n                });\n\n                if (!isSelected) {\n                    dropdown.append('<option value=\"' + value + '\">' + self.escapeHtml(name) +\n                        ' [' + categoryName + '] (' + report.source + ')</option>');\n                }\n            });\n        },\n\n        /**\n         * Render the selected reports list.\n         */\n        renderSelectedList: function() {\n            var self = this;\n            var list = this.container.find('.report-selector-list');\n            list.empty();\n\n            this.selectedReports.forEach(function(selected, index) {\n                // Find full report info\n                var report = self.reports.find(function(r) {\n                    return r.slug === selected.slug && r.source === selected.source;\n                });\n\n                var name = selected.name || (report ? (report.name || report.title || report.display_name) : selected.slug);\n                var categoryName = report && report.category_info ? report.category_info.name : 'Unknown';\n\n                var item = '<li class=\"list-group-item d-flex justify-content-between align-items-center\" ' +\n                    'data-index=\"' + index + '\" data-slug=\"' + selected.slug + '\" data-source=\"' + selected.source + '\">' +\n                    '<div class=\"d-flex align-items-center\">' +\n                    '<span class=\"drag-handle mr-2\" style=\"cursor: move;\"><i class=\"fa fa-bars text-muted\"></i></span>' +\n                    '<span class=\"badge badge-secondary mr-2\">' + (index + 1) + '</span>' +\n                    '<span>' + self.escapeHtml(name) + '</span>' +\n                    '<small class=\"text-muted ml-2\">[' + categoryName + ']</small>' +\n                    '<span class=\"badge badge-' + (selected.source === 'ai' ? 'info' : 'primary') + ' ml-2\">' +\n                    selected.source.toUpperCase() + '</span>' +\n                    '</div>' +\n                    '<button type=\"button\" class=\"btn btn-sm btn-outline-danger report-selector-remove\" title=\"' +\n                    self.strings.removereport + '\">' +\n                    '<i class=\"fa fa-times\"></i>' +\n                    '</button>' +\n                    '</li>';\n\n                list.append(item);\n            });\n\n            this.updateListDisplay();\n            this.initSortable();\n        },\n\n        /**\n         * Update list display (show/hide empty state).\n         */\n        updateListDisplay: function() {\n            var list = this.container.find('.report-selector-list');\n            var empty = this.container.find('.report-selector-empty');\n\n            if (this.selectedReports.length > 0) {\n                list.show();\n                empty.hide();\n            } else {\n                list.hide();\n                empty.show();\n            }\n        },\n\n        /**\n         * Initialize sortable for drag-and-drop reordering.\n         */\n        initSortable: function() {\n            var self = this;\n            var list = this.container.find('.report-selector-list');\n\n            // Simple sortable implementation using jQuery UI if available\n            if ($.fn.sortable) {\n                list.sortable({\n                    handle: '.drag-handle',\n                    update: function() {\n                        self.updateOrderFromDOM();\n                    }\n                });\n            } else {\n                // Fallback: manual drag handling\n                this.initManualSort();\n            }\n        },\n\n        /**\n         * Initialize manual sort without jQuery UI.\n         */\n        initManualSort: function() {\n            var self = this;\n            var list = this.container.find('.report-selector-list');\n            var dragItem = null;\n\n            list.on('dragstart', 'li', function(e) {\n                dragItem = this;\n                $(this).addClass('dragging');\n                e.originalEvent.dataTransfer.effectAllowed = 'move';\n            });\n\n            list.on('dragend', 'li', function() {\n                $(this).removeClass('dragging');\n                self.updateOrderFromDOM();\n            });\n\n            list.on('dragover', 'li', function(e) {\n                e.preventDefault();\n                var rect = this.getBoundingClientRect();\n                var midY = rect.top + rect.height / 2;\n                if (e.originalEvent.clientY < midY) {\n                    $(this).before(dragItem);\n                } else {\n                    $(this).after(dragItem);\n                }\n            });\n\n            // Make items draggable\n            list.find('li').attr('draggable', 'true');\n        },\n\n        /**\n         * Update the order from DOM after sorting.\n         */\n        updateOrderFromDOM: function() {\n            var self = this;\n            var newOrder = [];\n\n            this.container.find('.report-selector-list li').each(function() {\n                var slug = $(this).data('slug');\n                var source = $(this).data('source');\n                var existing = self.selectedReports.find(function(s) {\n                    return s.slug === slug && s.source === source;\n                });\n                if (existing) {\n                    newOrder.push(existing);\n                }\n            });\n\n            this.selectedReports = newOrder;\n            this.saveSelection();\n            this.renderSelectedList();\n        },\n\n        /**\n         * Bind event handlers.\n         */\n        bindEvents: function() {\n            var self = this;\n\n            // Add report button\n            this.container.on('click', '.report-selector-add-btn', function() {\n                self.addSelectedReport();\n            });\n\n            // Remove report button\n            this.container.on('click', '.report-selector-remove', function() {\n                var item = $(this).closest('li');\n                var slug = item.data('slug');\n                var source = item.data('source');\n                self.removeReport(slug, source);\n            });\n\n            // Display mode change - show/hide containers\n            $('[name=\"config_display_mode\"]').on('change', function() {\n                var mode = $(this).val();\n                if (mode === 'kpi') {\n                    $('#kpi-report-selector-container').show();\n                    $('#tabs-report-selector-container').hide();\n                } else if (mode === 'tabs') {\n                    $('#kpi-report-selector-container').hide();\n                    $('#tabs-report-selector-container').show();\n                } else {\n                    $('#kpi-report-selector-container').hide();\n                    $('#tabs-report-selector-container').hide();\n                }\n            }).trigger('change');\n        },\n\n        /**\n         * Add the selected report from dropdown.\n         */\n        addSelectedReport: function() {\n            var dropdown = this.container.find('.report-selector-dropdown');\n            var value = dropdown.val();\n\n            if (!value) {\n                return;\n            }\n\n            var parts = value.split('::');\n            var slug = parts[0];\n            var source = parts[1] || 'wizard';\n\n            // Find the report\n            var report = this.reports.find(function(r) {\n                return r.slug === slug && r.source === source;\n            });\n\n            if (!report) {\n                return;\n            }\n\n            // Add to selected list\n            this.selectedReports.push({\n                slug: slug,\n                source: source,\n                name: report.name || report.title || report.display_name || slug\n            });\n\n            this.saveSelection();\n            this.populateDropdown();\n            this.renderSelectedList();\n\n            // Reset dropdown\n            dropdown.val('');\n        },\n\n        /**\n         * Remove a report from selection.\n         *\n         * @param {string} slug\n         * @param {string} source\n         */\n        removeReport: function(slug, source) {\n            this.selectedReports = this.selectedReports.filter(function(s) {\n                return !(s.slug === slug && s.source === source);\n            });\n\n            this.saveSelection();\n            this.populateDropdown();\n            this.renderSelectedList();\n        },\n\n        /**\n         * Save selection to textarea.\n         */\n        saveSelection: function() {\n            this.textarea.val(JSON.stringify(this.selectedReports));\n        },\n\n        /**\n         * Escape HTML special characters.\n         *\n         * @param {string} text\n         * @return {string}\n         */\n        escapeHtml: function(text) {\n            if (!text) {\n                return '';\n            }\n            var div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n    };\n\n    return {\n        /**\n         * Initialize report selectors for the edit form.\n         *\n         * @param {Object} options Configuration options\n         */\n        init: function(options) {\n            // Initialize KPI report selector\n            new ReportSelector({\n                mode: 'kpi',\n                apiKey: options.apiKey,\n                containerId: 'kpi-report-selector-container',\n                textareaName: 'config_kpi_selected_reports'\n            });\n\n            // Initialize Tabs report selector\n            new ReportSelector({\n                mode: 'tabs',\n                apiKey: options.apiKey,\n                containerId: 'tabs-report-selector-container',\n                textareaName: 'config_tabs_selected_reports'\n            });\n        }\n    };\n});\n"],"names":["define","$","Str","Notification","ReportSelector","options","mode","apiKey","containerId","textareaName","container","textarea","reports","selectedReports","strings","init","prototype","self","this","length","loadExistingSelection","loadStrings","then","render","fetchReports","bindEvents","show","get_strings","key","component","addreport","removereport","noreportsselected","selectareport","loading","value","val","JSON","parse","e","html","updateListDisplay","baseUrl","when","ajax","url","method","headers","timeout","wizardResult","aiResult","allReports","data","forEach","r","source","push","populateDropdown","renderSelectedList","fail","addNotification","message","type","dropdown","find","remove","report","name","title","display_name","slug","categoryName","category_info","some","s","append","escapeHtml","list","empty","selected","index","item","toUpperCase","initSortable","hide","fn","sortable","handle","update","updateOrderFromDOM","initManualSort","dragItem","on","addClass","originalEvent","dataTransfer","effectAllowed","removeClass","preventDefault","rect","getBoundingClientRect","midY","top","height","clientY","before","after","attr","newOrder","each","existing","saveSelection","addSelectedReport","closest","removeReport","trigger","parts","split","filter","stringify","text","div","document","createElement","textContent","innerHTML"],"mappings":"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"}