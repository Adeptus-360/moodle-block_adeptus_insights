{"version":3,"file":"alert_report_search.min.js","sources":["../src/alert_report_search.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Ajax autocomplete for alert report selection.\n *\n * @module     block_adeptus_insights/alert_report_search\n * @copyright  2026 Adeptus 360 <info@adeptus360.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification'], function($, Ajax, Notification) {\n    'use strict';\n\n    return /** @alias module:block_adeptus_insights/alert_report_search */ {\n        /**\n         * List of reports matching the query.\n         *\n         * @param {String} selector The selector of the autocomplete element.\n         * @param {String} query The query string.\n         * @param {Function} callback A callback function receiving an array of results.\n         * @param {Function} failure A function to call when AJAX fails.\n         */\n        transport: function(selector, query, callback, failure) {\n            var promise;\n\n            // Build the args for the web service.\n            var args = {\n                query: query\n            };\n\n            // Call the web service.\n            promise = Ajax.call([{\n                methodname: 'block_adeptus_insights_search_reports',\n                args: args\n            }]);\n\n            promise[0].then(function(results) {\n                var options = [];\n\n                // Format results for autocomplete.\n                if (results && results.reports) {\n                    results.reports.forEach(function(report) {\n                        options.push({\n                            value: report.slug,\n                            label: report.label\n                        });\n                    });\n                }\n\n                callback(options);\n            }).fail(function(ex) {\n                // If web service fails, try to fetch locally from existing data.\n                failure(ex);\n            });\n        },\n\n        /**\n         * Process the results for display.\n         *\n         * @param {String} selector The selector for the autocomplete element.\n         * @param {Array} results The results from transport.\n         * @return {Array} The processed results.\n         */\n        processResults: function(selector, results) {\n            return results;\n        }\n    };\n});\n"],"names":["define","$","Ajax","Notification","transport","selector","query","callback","failure","args","call","methodname","then","results","options","reports","forEach","report","push","value","slug","label","fail","ex","processResults"],"mappings":";;;;;;;AAuBAA,oDAAO,CAAC,SAAU,YAAa,sBAAsB,SAASC,EAAGC,KAAMC,oBAGI,CASnEC,UAAW,SAASC,SAAUC,MAAOC,SAAUC,aAIvCC,KAAO,CACPH,MAAOA,OAIDJ,KAAKQ,KAAK,CAAC,CACjBC,WAAY,wCACZF,KAAMA,QAGF,GAAGG,MAAK,SAASC,aACjBC,QAAU,GAGVD,SAAWA,QAAQE,SACnBF,QAAQE,QAAQC,SAAQ,SAASC,QAC7BH,QAAQI,KAAK,CACTC,MAAOF,OAAOG,KACdC,MAAOJ,OAAOI,WAK1Bd,SAASO,YACVQ,MAAK,SAASC,IAEbf,QAAQe,QAWhBC,eAAgB,SAASnB,SAAUQ,gBACxBA"}